# Configuração SNMP para nginx-web
# FCAPS - Gerenciamento de Redes

# Informações do sistema
sysLocation    Nginx Web Server Container - FCAPS Network
sysContact     admin@fcaps.local
sysName        nginx-web
sysServices    72

# Comunidade de leitura (SNMPv2c)
rocommunity    public  default
rocommunity6   public  default

# Endereço de escuta
agentaddress   udp:161
agentaddress   udp6:[::1]:161

# Acesso ao sistema
view   systemonly  included   .1.3.6.1.2.1.1
view   systemonly  included   .1.3.6.1.2.1.25.1

# MIBs disponíveis
view   systemonly  included   .1.3.6.1.2.1.2
view   systemonly  included   .1.3.6.1.2.1.4
view   systemonly  included   .1.3.6.1.2.1.6
view   systemonly  included   .1.3.6.1.2.1.25

# Permissões
rouser   nobody noauth

# Configurações de log
dontLogTCPWrappersConnects yes

# Persistência de dados
persistentDir /var/net-snmp

# Informações de processo
proc nginx
proc snmpd

# Métricas de carga
load 5 5 5

# Informações de disco
disk /

# Extensões customizadas para Nginx
extend nginx-status /bin/sh -c "ps aux | grep -c '[n]ginx: worker process'"
extend nginx-master /bin/sh -c "ps aux | grep -c '[n]ginx: master process'"
extend nginx-port /bin/sh -c "netstat -an | grep -c ':80.*LISTEN'"
extend nginx-connections /bin/sh -c "netstat -an | grep ':80' | wc -l"
